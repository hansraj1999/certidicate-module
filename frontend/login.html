<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <form method="post" enctype="multipart/form-data" id="formElem">
        <input type="email" name="username" id='1'>
        <input type="password" name="password" id='2'>
        <button type="submit">Submit</button>
    </form>
</body>
</html>
<script>
    sessionStorage.clear();
    formElem.onsubmit = async (e) => {
    e.preventDefault();
    let response = await fetch('http://127.0.0.1:8000/login', {
      method: 'POST',
      body: new FormData(formElem)
    })
    let result = await response.json();
    console.log(result['detail']);
       if(result['detail']=="Invalid Credentials"||result['detail']=="Incorrect Password"){
        alert("wrong username or password");
       }
       else{
        sessionStorage.setItem("token","Bearer ".concat(result['access_token'] ));
        console.log(sessionStorage.getItem("token"));
        window.location.href="test.html";
       }

  };

</script>